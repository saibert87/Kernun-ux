!function(t,e){"use strict";function r(r,a,i,u,c){function l(){T=t.devicePixelRatio>1,i=s(i),a.delay>=0&&setTimeout(function(){f(!0)},a.delay),(a.delay<0||a.combined)&&(u.e=p(a.throttle,function(t){"resize"===t.type&&(z=B=-1),f(t.all)}),u.a=function(t){t=s(t),i.push.apply(i,t)},u.g=function(){return i=n(i).filter(function(){return!n(this).data(a.loadedName)})},u.f=function(t){for(var e=0;e<t.length;e++){var r=i.filter(function(){return this===t[e]});r.length&&f(!1,r)}},f(),n(a.appendScroll).on("scroll."+c+" resize."+c,u.e))}function s(t){var i=a.defaultImage,o=a.placeholder,u=a.imageBase,c=a.srcsetAttribute,l=a.loaderAttribute,s=a._f||{};t=n(t).filter(function(){var t=n(this),r=h(this);return!t.data(a.handledName)&&(t.attr(a.attribute)||t.attr(c)||t.attr(l)||s[r]!==e)}).data("plugin_"+a.name,r);for(var f=0,d=t.length;f<d;f++){var m=n(t[f]),A=h(t[f]),g=m.attr(a.imageBaseAttribute)||u;A===I&&g&&m.attr(c)&&m.attr(c,v(m.attr(c),g)),s[A]===e||m.attr(l)||m.attr(l,s[A]),A===I&&i&&!m.attr(C)?m.attr(C,i):A===I||!o||m.css(O)&&"none"!==m.css(O)||m.css(O,"url('"+o+"')")}return t}function f(t,e){if(!i.length)return void(a.autoDestroy&&r.destroy());for(var o=e||i,u=!1,c=a.imageBase||"",l=a.srcsetAttribute,s=a.handledName,f=0;f<o.length;f++)if(t||e||m(o[f])){var A=n(o[f]),g=h(o[f]),v=A.attr(a.attribute),p=A.attr(a.imageBaseAttribute)||c,b=A.attr(a.loaderAttribute);A.data(s)||a.visibleOnly&&!A.is(":visible")||!((v||A.attr(l))&&(g===I&&(p+v!==A.attr(C)||A.attr(l)!==A.attr(E))||g!==I&&p+v!==A.css(O))||b)||(u=!0,A.data(s,!0),d(A,g,p,b))}u&&(i=n(i).filter(function(){return!n(this).data(s)}))}function d(t,e,r,i){++w;var o=function(){y("onError",t),b(),o=n.noop};y("beforeLoad",t);var u=a.attribute,c=a.srcsetAttribute,l=a.sizesAttribute,s=a.retinaAttribute,f=a.removeAttribute,d=a.loadedName,m=t.attr(s);if(i){var A=function(){f&&t.removeAttr(a.loaderAttribute),t.data(d,!0),y(L,t),setTimeout(b,1),A=n.noop};t.off(D).one(D,o).one(N,A),y(i,t,function(e){e?(t.off(N),A()):(t.off(D),o())})||t.trigger(D)}else{var g=n(new Image);g.one(D,o).one(N,function(){t.hide(),e===I?t.attr(F,g.attr(F)).attr(E,g.attr(E)).attr(C,g.attr(C)):t.css(O,"url('"+g.attr(C)+"')"),t[a.effect](a.effectTime),f&&(t.removeAttr(u+" "+c+" "+s+" "+a.imageBaseAttribute),l!==F&&t.removeAttr(l)),t.data(d,!0),y(L,t),g.remove(),b()});var h=(T&&m?m:t.attr(u))||"";g.attr(F,t.attr(l)).attr(E,t.attr(c)).attr(C,h?r+h:null),g.complete&&g.trigger(N)}}function m(t){var e=t.getBoundingClientRect(),r=a.scrollDirection,n=a.threshold,i=g()+n>e.top&&-n<e.bottom,o=A()+n>e.left&&-n<e.right;return"vertical"===r?i:"horizontal"===r?o:i&&o}function A(){return z>=0?z:z=n(t).width()}function g(){return B>=0?B:B=n(t).height()}function h(t){return t.tagName.toLowerCase()}function v(t,e){if(e){var r=t.split(",");t="";for(var a=0,n=r.length;a<n;a++)t+=e+r[a].trim()+(a!==n-1?",":"")}return t}function p(t,e){var n,i=0;return function(o,u){function c(){i=+new Date,e.call(r,o)}var l=+new Date-i;n&&clearTimeout(n),l>t||!a.enableThrottle||u?c():n=setTimeout(c,t-l)}}function b(){--w,i.length||w||y("onFinishedAll")}function y(t,e,n){return!!(t=a[t])&&(t.apply(r,[].slice.call(arguments,1)),!0)}var w=0,z=-1,B=-1,T=!1,L="afterLoad",N="load",D="error",I="img",C="src",E="srcset",F="sizes",O="background-image";"event"===a.bind||o?l():n(t).on(N+"."+c,l)}function a(a,o){var u=this,c=n.extend({},u.config,o),l={},s=c.name+"-"+ ++i;return u.config=function(t,r){return r===e?c[t]:(c[t]=r,u)},u.addItems=function(t){return l.a&&l.a("string"===n.type(t)?n(t):t),u},u.getItems=function(){return l.g?l.g():{}},u.update=function(t){return l.e&&l.e({},!t),u},u.force=function(t){return l.f&&l.f("string"===n.type(t)?n(t):t),u},u.loadAll=function(){return l.e&&l.e({all:!0},!0),u},u.destroy=function(){return n(c.appendScroll).off("."+s,l.e),n(t).off("."+s),l={},e},r(u,c,a,l,s),c.chainable?a:u}var n=t.jQuery||t.Zepto,i=0,o=!1;n.fn.Lazy=n.fn.lazy=function(t){return new a(this,t)},n.Lazy=n.lazy=function(t,r,i){if(n.isFunction(r)&&(i=r,r=[]),n.isFunction(i)){t=n.isArray(t)?t:[t],r=n.isArray(r)?r:[r];for(var o=a.prototype.config,u=o._f||(o._f={}),c=0,l=t.length;c<l;c++)(o[t[c]]===e||n.isFunction(o[t[c]]))&&(o[t[c]]=i);for(var s=0,f=r.length;s<f;s++)u[r[s]]=t[0]}},a.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:t,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:e,afterLoad:e,onError:e,onFinishedAll:e},n(t).on("load",function(){o=!0})}(window),function(t){function e(e,r,i){var o=e.prop("attributes"),u=t("<"+r+">");return t.each(o,function(t,e){"srcset"!==e.name&&e.name!==n||(e.value=a(e.value,i)),u.attr(e.name,e.value)}),e.replaceWith(u),u}function r(e,r,a){var n=t("<img>").one("load",function(){a(!0)}).one("error",function(){a(!1)}).appendTo(e).attr("src",r);n.complete&&n.load()}function a(t,e){if(e){var r=t.split(",");t="";for(var a=0,n=r.length;a<n;a++)t+=e+r[a].trim()+(a!==n-1?",":"")}return t}var n="data-src";t.lazy(["pic","picture"],["picture"],function(i,o){if("picture"===i[0].tagName.toLowerCase()){var u=i.find(n),c=i.find("data-img"),l=this.config("imageBase")||"";u.length?(u.each(function(){e(t(this),"source",l)}),1===c.length?(c=e(c,"img",l),c.on("load",function(){o(!0)}).on("error",function(){o(!1)}),c.attr("src",c.attr(n)),this.config("removeAttribute")&&c.removeAttr(n)):i.attr(n)?(r(i,l+i.attr(n),o),this.config("removeAttribute")&&i.removeAttr(n)):o(!1)):i.attr("data-srcset")?(t("<source>").attr({media:i.attr("data-media"),sizes:i.attr("data-sizes"),type:i.attr("data-type"),srcset:a(i.attr("data-srcset"),l)}).appendTo(i),r(i,l+i.attr(n),o),this.config("removeAttribute")&&i.removeAttr(n+" data-srcset data-media data-sizes data-type")):o(!1)}else o(!1)})}(window.jQuery||window.Zepto);
//# sourceMappingURL=jquery.lazy.min.js.map
